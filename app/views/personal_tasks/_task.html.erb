<tr class="hidden_content">
  <td><%= task_counter + 1 %></td>
  <td><%= "OR#{task.id}"%></a></td>
  <td><%= task.title %></td>

  <% if task.parent_task? %>
    <td><span class="badge badge-info">parent task</span></td>
  <% else %>
    <td><span class="badge badge-warning">children task</span></td>
  <% end %>
  <% if task.start_time > Date.today %>
    <td><span class="badge badge-info">transfer</span></td>
  <% elsif task.end_time > Date.today %>
    <td><span class="badge badge-warning">unfinished</span></td>
  <% else %>
    <td><span class="badge badge-danger">finished</span></td>
  <% end %>

    <td>
    <% if task.end_time < Date.today %>
      <span class="text-success" style="font-weight: 800;"><%= "100 %" %></span>
    <% else %>
      <span class="text-success" style="font-weight: 800;"><%= "#{ ((task.start_time..Date.today).count.to_f / (task.start_time..task.end_time).count * 100).round(2)} %" %></span>
    <% end %>
  </td>

  <td>
    <% if task.end_time < Date.today %>
      <% if task.progress == 100 %>
        <span class="description-percentage text-warning">
            <i class="fas fa-caret-left"></i>
          <b><%= "0 %" %></b>
        </span>
      <% elsif task.progress < 100 %>
        <span class="description-percentage text-danger">
            <i class="fas fa-caret-down"></i>
          <b><%= "#{(task.progress - 100).round(2)}%" %></b>
        </span>
      <% else %>
        <span class="description-percentage text-danger">
            <i class="fas fa-caret-up"></i>
          <b><%= "#{(task.progress - 100).round(2)}%" %></b>
        </span>
      <% end %>
    <% else %>
      <% if task.progress < ((task.start_time..Date.today).count.to_f / (task.start_time..task.end_time).count * 100).round(2) %>
        <span class="description-percentage text-danger">
          <i class="fas fa-caret-down"></i>
          <b><%= "#{(task.progress - (task.start_time..Date.today).count.to_f / (task.start_time..task.end_time).count * 100).round(2)} %" %></b>
        </span>
      <% elsif task.progress > ((task.start_time..Date.today).count.to_f / (task.start_time..task.end_time).count * 100).round(2) %>
         <span class="description-percentage text-success">
          <i class="fas fa-caret-up"></i>
          <b><%= "#{(task.progress - (task.start_time..Date.today).count.to_f / (task.start_time..task.end_time).count * 100).round(2) } %" %></b>
        </span>
      <% else %>
        <span class="description-percentage text-warning">
          <i class="fas fa-caret-left"></i>
          <b><%= "0 %" %></b>
        </span>
      <% end %>
    <% end %>
  </td>

  <td class="project-actions text-right">
    <%= link_to personal_task_path(task), {class: "btn btn-primary btn-sm", remote: :true, "data-toggle": "modal", "data-target": "#show_dialog"} do %>
      <i class="fas fa-eye">
      </i>
      View
    <% end %>
    <% if !task.parent_task?%>
      <% if task.parent.lock == "open" %>
        <%= link_to personal_task_path(task), class: "btn btn-danger btn-sm", method: :delete do %>
          <i class="fas fa-trash">
          </i>
          Delete
        <% end %>
      <% else %>
        <%= link_to edit_personal_task_path(task), {class: "btn btn-info btn-sm", remote: :true, "data-toggle": "modal", "data-target": "#show_dialog"} do %>
          <i class="fas fa-pencil-alt">
          </i>
          Edit
        <% end %>
      <% end %>
    <% end %>
  </td>
</tr>
